#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.13
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1081929522',
        'name' => 'bug/dependency-tree.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $error;
        
        eval { BLOCK: {
    $output .=  "<!-- 1.0\@bugzilla.org -->\n";
    $output .=  "\n";
    #line 0 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('global/header.html.tmpl', { 'title' => ("Bug " . $stash->get('bugid') . " の依存ツリー"), 'h1' => ("<a href=\"show_bug.cgi?id=" . $stash->get('bugid') . "\">bug " . $stash->get('bugid') . "</a> の依存ツリー"), 'style' => 'strike { background-color: #d9d9d9; color: #000000; }' });
    $output .=  "\n";
    #line 32 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('depthControlToolbar');
    $output .=  "\n\n";
    $output .=  "\n<h3>";
    #line 35 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('hide_resolved') ? '未解決の' : '';
    $output .=  "バグ <a href=\"show_bug.cgi?id=";
    #line 35 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "\">bug ";
    #line 35 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "</a> が依存している</h3>";
    #line 52 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get(['dependson_ids', 0, 'size', 0]) > 0) {
    $output .=  "\n  (";
    #line 40 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth')) {
    $output .=  "Up to ";
    #line 40 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('maxdepth');
    $output .=  " level";
    #line 40 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth') > 1) {
    $output .=  's';
    }
    
    $output .=  " deep | ";
    }
    
    $output .=  "\n  <a href=\"buglist.cgi?bug_id=";
    #line 41 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['dependson_ids', 0, 'join', [ ',' ]]);
    $output .=  "\">リスト形式で見る</a>";
    #line 46 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('canedit') && $stash->get(['dependson_ids', 0, 'size', 0]) > 1) {
    $output .=  "\n    | <a href=\"buglist.cgi?bug_id=";
    #line 44 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['dependson_ids', 0, 'join', [ ',' ]]);
    $output .=  "&amp;tweak=1\">変更を行なう</a>";
    }
    
    $output .=  ")";
    #line 48 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->include('display_tree', { 'tree' => $stash->get('dependson_tree'), 'bug_id' => $stash->get('bugid') });
    }
    else {
    $output .=  "\n  </h3>\n  <p>なし</p>";
    }
    
    $output .=  "\n\n";
    $output .=  "\n<h3>";
    #line 55 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('hide_resolved') ? '未解決の' : '';
    $output .=  "バグ <a href=\"show_bug.cgi?id=";
    #line 55 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "\">bug ";
    #line 55 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "</a> が修正を妨害している</h3>";
    #line 72 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get(['blocked_ids', 0, 'size', 0]) > 0) {
    $output .=  "\n  (";
    #line 60 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth')) {
    $output .=  "Up to ";
    #line 60 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('maxdepth');
    $output .=  " level";
    #line 60 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth') > 1) {
    $output .=  's';
    }
    
    $output .=  " deep | ";
    }
    
    $output .=  "\n  <a href=\"buglist.cgi?bug_id=";
    #line 61 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['blocked_ids', 0, 'join', [ ',' ]]);
    $output .=  "\">リスト形式で見る</a>";
    #line 66 "template/ja/default/bug/dependency-tree.html.tmpl"
    if ($stash->get('canedit') && $stash->get(['blocked_ids', 0, 'size', 0]) > 1) {
    $output .=  "\n    | <a href=\"buglist.cgi?bug_id=";
    #line 64 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['blocked_ids', 0, 'join', [ ',' ]]);
    $output .=  "&amp;tweak=1\">変更を行なう</a>";
    }
    
    $output .=  ")";
    #line 68 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->include('display_tree', { 'tree' => $stash->get('blocked_tree'), 'bug_id' => $stash->get('bugid') });
    }
    else {
    $output .=  "\n  </h3>\n  <p>なし</p>";
    }
    
    $output .=  "\n";
    #line 75 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('depthControlToolbar');
    $output .=  "\n";
    #line 78 "template/ja/default/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('global/footer.html.tmpl');
    $output .=  "\n\n\n";
    $output .=  "\n";
    $output .=  "\n";
    $output .=  "\n";
    
    $output .=  "\n\n";
    $output .=  "\n";
    $output .=  "\n";
    $output .=  "\n";
    
    $output .=  "\n";
        } };
        if ($@) {
            $error = $context->catch($@, \$output);
            die $error unless $error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {
        'depthControlToolbar' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        $output .=  "\n <table cellpadding=\"3\" border=\"0\" cellspacing=\"0\" bgcolor=\"#d0d0d0\">\n <tr>\n   ";
        $output .=  "\n   <td align=\"center\">\n   <form method=\"get\" action=\"showdependencytree.cgi\" \n           style=\"display: inline; margin: 0px;\">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 123 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">";
        #line 128 "template/ja/default/bug/dependency-tree.html.tmpl"
        if ($stash->get('maxdepth')) {
        $output .=  "\n       <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 126 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth');
        $output .=  "\">";
        }
        
        $output .=  "\n     <input type=\"hidden\" name=\"hide_resolved\" value=\"";
        #line 129 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved') ? 0 : 1;
        $output .=  "\">\n     <input type=\"submit\" value=\"解決済のバグを ";
        #line 130 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved') ? '表示する' : '隠す';
        $output .=  "\">\n   </form>\n   </td>\n\n   <td>\n     深さの最大値:\n   </td>\n\n   <td>\n     &nbsp;\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input type=\"submit\" value=\"&nbsp;1&nbsp;\" ";
        #line 146 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('realdepth') < 2 || $stash->get('maxdepth') eq 1 ? '不可' : '';
        $output .=  ">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 149 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"maxdepth\" type=\"hidden\" value=\"1\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 151 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\" \n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 160 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 161 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') eq 1 ? 1 : ($stash->get('maxdepth') ? $stash->get('maxdepth') - 1 : $stash->get('realdepth') - 1);
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 165 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;&lt;&nbsp;\" ";
        #line 166 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('realdepth') < 2 || ($stash->get('maxdepth') && $stash->get('maxdepth') < 2) ? '不可' : '';
        $output .=  ">\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\" \n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"maxdepth\" size=\"4\" maxlength=\"4\" value=\"";
        #line 177 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') > 0 && $stash->get('maxdepth') <= $stash->get('realdepth') ? $stash->get('maxdepth') : '';
        $output .=  "\">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 180 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 181 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <noscript>\n       <input type=\"submit\" value=\"変更\" ";
        #line 183 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('realdepth') < 2 ? '不可' : '';
        $output .=  ">\n     </noscript>\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\" \n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 193 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">";
        #line 198 "template/ja/default/bug/dependency-tree.html.tmpl"
        if ($stash->get('maxdepth')) {
        $output .=  "\n       <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 196 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') + 1;
        $output .=  "\">";
        }
        
        $output .=  "\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 199 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;&gt;&nbsp;\" ";
        #line 200 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('realdepth') < 2 || ! $stash->get('maxdepth') || $stash->get('maxdepth') >= $stash->get('realdepth') ? '不可' : '';
        $output .=  ">\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\" \n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 211 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 212 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;無制限&nbsp;\" ";
        #line 215 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') eq 0 || $stash->get('maxdepth') eq $stash->get('realdepth') ? '不可' : '';
        $output .=  ">\n   </form>\n   </td>\n </tr>\n</table>";
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
        'display_tree' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        #line 86 "template/ja/default/bug/dependency-tree.html.tmpl"
        $stash->set(['tree', 0, $stash->get('bug_id'), 0, 'seen', 0], 1);
        $output .=  "\n<ul>";
        #line 105 "template/ja/default/bug/dependency-tree.html.tmpl"
        
        # FOREACH 
        do {
            my ($value, $error, $oldloop);
            my $list = $stash->get(['tree', 0, $stash->get('bug_id'), 0, 'dependencies', 0]);
            
            unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
                $list = Template::Config->iterator($list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($value, $error) = $list->get_first();
            eval { $oldloop = $stash->get('loop') };
            $stash->set('loop', $list);
            eval {
        LOOP:   while (! $error) {
                    $stash->{'dep_id'} = $value;
        #line 89 "template/ja/default/bug/dependency-tree.html.tmpl"
        $stash->set('dep', $stash->get(['tree', 0, $stash->get('dep_id'), 0]));
        $output .=  "\n    <li>";
        #line 92 "template/ja/default/bug/dependency-tree.html.tmpl"
        if (! $stash->get(['dep', 0, 'open', 0])) {
        $output .=  '<strike>';
        }
        
        $output .=  "\n      <a href=\"show_bug.cgi?id=";
        #line 93 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('dep_id');
        $output .=  "\">";
        #line 93 "template/ja/default/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('dep_id');
        $output .=  " \n        [";
        #line 94 "template/ja/default/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'milestone', 0])) {
        #line 94 "template/ja/default/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'milestone', 0]);
            
            &$filter($output);
        };
        
        $output .=  ", ";
        }
        
        #line 94 "template/ja/default/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'assignee_email', 0]);
            
            &$filter($output);
        };
        
        $output .=  "] - ";
        #line 101 "template/ja/default/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'seen', 0])) {
        $output .=  "\n          <i>このバグはこのツリーの別の場所にあります。</i></a>";
        }
        else {
        #line 99 "template/ja/default/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'summary', 0]);
            
            &$filter($output);
        };
        
        $output .=  ".</a>";
        }
        
        #line 101 "template/ja/default/bug/dependency-tree.html.tmpl"
        if (! $stash->get(['dep', 0, 'open', 0])) {
        $output .=  '</strike>';
        }
        
        #line 101 "template/ja/default/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'dependencies', 0, 'size', 0]) > 0 && ! $stash->get(['dep', 0, 'seen', 0])) {
        $output .=  $context->include('display_tree', { 'bug_id' => $stash->get('dep_id') });
        }
        
        $output .=  "\n    </li>";;
                    ($value, $error) = $list->get_next();
                }
            };
            $stash->set('loop', $oldloop);
            die $@ if $@;
            $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
            die $error if $error;
        };
        
        $output .=  "\n</ul>";
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
    },
});

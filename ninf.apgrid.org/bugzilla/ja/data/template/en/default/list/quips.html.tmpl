#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.09
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1081929521',
        'name' => 'list/quips.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $error;
        
        eval { BLOCK: {
    $output .=  "<!-- 1.0\@bugzilla.org -->\n";
    $output .=  "\n\n";
    $output .=  "\n";
    $output .=  $context->process('global/header.html.tmpl', { 'title' => 'Bugzilla Quip System', 'h1' => 'Add your own clever headline' });
    $output .=  "\n";
    if ($stash->get('added_quip')) {
    $output .=  "\n  <p>\n    <font color=\"red\">\n      Your quip '<tt>";
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('added_quip');
        
        &$filter($output);
    };
    
    $output .=  "</tt>' has been added.\n    </font>\n  </p>";
    }
    
    $output .=  "\n\n<p>\n  Bugzilla will pick a random quip for the headline on each bug list, and \n  you can extend the quip list. Type in something clever or funny or boring \n  (but not obscene or offensive, please) and bonk on the button.\n</p>\n\n<form method=\"post\" action=\"quips.cgi\">\n  <input type=\"hidden\" name=\"action\" value=\"add\">\n  <input size=\"80\" name=\"quip\">\n  <p>\n    <input type=\"submit\" value=\"Add This Quip\">\n  </p>\n</form>\n";
    if ($stash->get('show_quips')) {
    $output .=  "\n  <h2>\n    Existing quips:\n  </h2>\n  <ul>";
    
    # FOREACH 
    do {
        my ($value, $error, $oldloop);
        my $list = $stash->get('quips');
        
        unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
            $list = Template::Config->iterator($list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($value, $error) = $list->get_first();
        eval { $oldloop = $stash->get('loop') };
        $stash->set('loop', $list);
        eval {
    LOOP:   while (! $error) {
                $stash->{'quip'} = $value;
    $output .=  "\n      <li>";
    $output .=  $stash->get('quip');
    $output .=  "</li>";;
                ($value, $error) = $list->get_next();
            }
        };
        $stash->set('loop', $oldloop);
        die $@ if $@;
        $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
        die $error if $error;
    };
    
    $output .=  "\n  </ul>";
    }
    else {
    $output .=  "\n  <p>\n    Those who like their wisdom in large doses can \n    <a href=\"quips.cgi?action=show\">view the whole quip list</a>.\n  </p>";
    }
    
    $output .=  "\n";
    $output .=  $context->process('global/footer.html.tmpl');
    $output .=  "\n";
        } };
        if ($@) {
            $error = $context->catch($@, \$output);
            die $error unless $error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {

    },
});

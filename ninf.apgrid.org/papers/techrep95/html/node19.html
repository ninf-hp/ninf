<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!Converted with LaTeX2HTML 95.1 (Fri Jan 20 1995) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds >
<!Actually with its Japanized version JLaTeX2HTML 95 (Wed Mar 1 1995) by Masahiro Kitagawa (kitagawa@ee.es.osaka-u.ac.jp), Osaka University >
<HEAD>
<TITLE> Appendix B: Ninf IDL Sample </TITLE>
</HEAD>
<BODY>
<meta name="description" value=" Appendix B: Ninf IDL Sample ">
<meta name="keywords" value="main">
<meta name="resource-type" value="document">
<meta name="distribution" value="global">
<P>
 <BR> <HR><A NAME=tex2html222 HREF="node20.html"><IMG ALIGN=BOTTOM ALT="next" SRC="http://www.etl.go.jp:8080/etl/captain/icons/next_motif.gif"></A>   <A NAME=tex2html220 HREF="main.html"><IMG ALIGN=BOTTOM ALT="up" SRC="http://www.etl.go.jp:8080/etl/captain/icons/up_motif.gif"></A>   <A NAME=tex2html214 HREF="node18.html"><IMG ALIGN=BOTTOM ALT="previous" SRC="http://www.etl.go.jp:8080/etl/captain/icons/previous_motif.gif"></A>         <BR>
<B> Next:</B> <A NAME=tex2html223 HREF="node20.html">参考文献</A>
<B>Up:</B> <A NAME=tex2html221 HREF="main.html">無題</A>
<B> Previous:</B> <A NAME=tex2html215 HREF="node18.html"> Appendix A: Ninf </A>
<BR> <HR> <P>
<H1><A NAME=SECTION000100000000000000000> Appendix B: Ninf IDL Sample </A></H1>
<P>

<P>
sample.idl:

<PRE>Module sample;
Library &quot;-lm&quot;;

Globals { int x,y,z; }

Define sin(IN double d, OUT double result[])
&quot; This is test ...&quot;
{    
    double sin();
    *result = sin(d);
}

Define mmul(long mode_in int n, mode_in double A[n][n], 
    mode_in double B[n][n],
    mode_out double C[n][n])
Required &quot;sample.o&quot;
Calls &quot;C&quot; mmul(n,A,B,C);

Define mmul2(long mode_in int n, mode_in double A[n*n+1-1], 
        mode_in double B[n*n+2-3+1],
        mode_out double C[n*n])
Required &quot;sample.o&quot;
Calls &quot;C&quot; mmul(n,A,B,C);


Define FFT(IN int n,IN int m, OUT float x[n][m], float INOUT y[m][n])
Required &quot;sample.o&quot;
Calls &quot;Fortran&quot; FFT(n,x,y);
</PRE>

<P>
sample.mak:

<PRE># This file 'sample.mak' was created by ninf_gen. Don't edit

# CompileOptions:

# stub sources
NINF_STUB_SRC = _stub_sin.c  _stub_mmul.c  _stub_FFT.c 

# stub programs
NINF_STUB_PROGRAM = _stub_sin _stub_mmul _stub_FFT

all: $(NINF_STUB_PROGRAM)

_stub_sin:
    $(CC) $(LDFLAGS) -o _stub_sin _stub_sin.c ninf_stub_lib.a  -lm

_stub_mmul:
    $(CC) $(LDFLAGS) -o _stub_mmul _stub_mmul.c ninf_stub_lib.a sample.o -lm

_stub_mmul2:
    $(CC) $(LDFLAGS) -o _stub_mmul2 _stub_mmul2.c ninf_stub_lib.a sample.o -lm

_stub_FFT:
    $(CC) $(LDFLAGS) -o _stub_FFT _stub_FFT.c ninf_stub_lib.a sample.o -lm


clean:
    rm $(NINF_STUB_PROGRAM)

# END OF Makefile
</PRE>

<P>
_stub_mmul2.c:
<P>

<PRE>/* _stub_mmul2.c : generated by ./ninf_gen, don't edit. */
#include &quot;ninf_stub.h&quot;

NINF_STUB_INFO ninf_stub_info = {
0,0,0,  &quot;sample&quot;,&quot;mmul2&quot;,4,
{
        { 5, 1, 0,},
        { 13, 1, 1,{
                { 3, 2, 
                        {
                          {2,2,4,1,4,1,4,5,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,3,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                },
                }},
        { 13, 1, 1,{
                { 3, 1, 
                        {
                          {2,2,4,1,4,1,4,1,4,5,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,3,2,1,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                },
                }},
        { 13, 2, 1,{
                { 3, 3, 
                        {
                          {2,2,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                  0, 0, 
                        {
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,},
                          {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,}
                        },
                },
                }},
}
};

/* Globals */
 int x,y,z; 

/* Stub Main program */
main(argc,argv){
        long n;
        double *A;
        double *B;
        double *C;

        Ninf_stub_INIT(argc,argv);
        while(Ninf_stub_REQ()){
                Ninf_stub_SET_ARG(&amp;n,0);
                Ninf_stub_SET_ARG(&amp;A,1);
                Ninf_stub_SET_ARG(&amp;B,2);
                Ninf_stub_SET_ARG(&amp;C,3);
                mmul(n,A,B,C);
                Ninf_stub_END();
        }
        Ninf_stub_EXIT();
}
 /* END OF Stub Main */
</PRE>

<P>
<BR> <HR>
<P><ADDRESS>
<I>Hidemoto Nakada <BR>
Wed Dec 20 05:42:46 JST 1995</I>
</ADDRESS>
</BODY>

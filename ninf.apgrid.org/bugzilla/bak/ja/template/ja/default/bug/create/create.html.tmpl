<!-- 1.0@bugzilla.org -->
[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Bug Tracking System.
  #
  # The Initial Developer of the Original Code is Netscape Communications
  # Corporation. Portions created by Netscape are
  # Copyright (C) 1998 Netscape Communications Corporation. All
  # Rights Reserved.
  #
  # Contributor(s): Gervase Markham <gerv@gerv.net>
  #                 Ville Skytt? <ville.skytta@iki.fi>
  #%]

[% PROCESS global/header.html.tmpl
  title = "バグ登録"
  h2 = "このページで Bugzilla にバグを登録できます。"
%]

<form method="post" action="post_bug.cgi">
<input type="hidden" name="product" value="[% product FILTER html %]">

<table cellspacing="2" cellpadding="0" border="0">

  <tr>
    <td><br></td>
  </tr>

  <tr>
    <td></td>
    <td colspan="3">
    [%# Migration note: The following file corresponds to the old Param
      # 'entryheaderhtml'
      #%]
    [% INCLUDE 'bug/create/user-message.html.tmpl' %]
    </td>
  </tr>
  
  <tr>
    <td><br></td>
  </tr>

  <tr>
    <td align="right" valign="top"><strong>報告者:</strong></td>
    <td valign="top">[% reporter FILTER html %]</td>
    
    <td align="right" valign="top"><strong>プロダクト:</strong></td>
    <td valign="top">[% product FILTER html %]</td>
  </tr>
  
  [%# We can't use the select block in these two cases for various reasons. %]
  <tr>
    <td align="right" valign="top">
      <strong>バージョン:</strong>
    </td>
    <td>
      <select name="version" size="5">
        [%- FOREACH v = version %]
          <option value="[% v FILTER html %]"
            [% " selected=\"selected\"" IF v == default.version %]>[% v FILTER html -%]
          </option>
        [%- END %]
      </select>
    </td>  
    
    <td align="right" valign="top">
      <strong>
        <a href="describecomponents.cgi?product=[% product FILTER url_quote %]">
          コンポーネント</a>:
      </strong>
    </td>
    <td>
      <select name="component" size="5">
        [%- FOREACH c = component_ %]
          <option value="[% c.name FILTER html %]"
            [% " selected=\"selected\"" IF c.name == default.component_ %]>
            [% c.name FILTER html -%]
          </option>
        [%- END %]
      </select>
    </td>  
  </tr>
  
  <tr>
    <td>&nbsp;</td>
    <td colspan="3"></td>
  </tr>
  
  <tr>
    [% sel = { description => 'プラットフォーム', name => 'rep_platform' } %]
    [% INCLUDE select %]
    
    [% sel = { description => 'OS', name => 'op_sys' } %]
    [% INCLUDE select %]
  </tr>
  
  <tr>  
  [% IF Param('letsubmitterchoosepriority') %]
    [% sel = { description => '優先順位', name => 'priority' } %]
    [% INCLUDE select %]
  [% ELSE %]
    <input type="hidden" name="priority" 
           value="[% default.priority FILTER html %]">
  [% END %]

  [% sel = { description => '重要度', name => 'bug_severity' } %]
  [% INCLUDE select %]    
  </tr>
  
  <tr>
    <td>&nbsp;</td>
    <td colspan="3"></td>
  </tr>

[% IF bug_status.size > 1 %] 
  <tr>
    [% sel = { description => '初期ステータス', name => 'bug_status' } %]
    [% INCLUDE select %]
    
    <td colspan="2"></td>
  </tr>
[% ELSE %]
  <input type="hidden" name="bug_status" value="[% default.bug_status %]">  
[% END %]

  <tr>
    <td align="right">
      <strong>
        <a href="bug_status.html#assigned_to">担当者</a>:
      </strong>
    </td>
    <td colspan="3">
      <input name="assigned_to" size="32" 
             value="[% assigned_to FILTER html %]">
      (空白のままだと、コンポーネントの初期担当者がこのバグを担当します)
    </td>
  </tr>
  
  <tr>
    <td align="right"><strong>Cc:</strong></td>
    <td colspan="3">
      <input name="cc" size="45" value="[% cc FILTER html %]">
    </td>
  </tr>
  
  <tr>
    <td>&nbsp;</td>
    <td colspan="3"></td>
  </tr>

  <tr>
    <td align="right"><strong>URL:</strong></td>
    <td colspan="3">
      <input name="bug_file_loc" size="60" 
             value="[% bug_file_loc FILTER html %]">
    </td>
  </tr>
  
  <tr>
    <td align="right"><strong>要約:</strong></td>
    <td colspan="3">
      <input name="short_desc" size="60" value="[% short_desc FILTER html %]">
    </td>
  </tr>
  
  <tr><td align="right" valign="top"><strong>コメント:</strong></td>
    <td colspan="3">
      <textarea wrap="hard" name="comment" rows="10" cols="80">
        [% comment FILTER html %]</textarea>
      <br>
    </td>
  </tr>
  
  <tr>
    <td></td>
    <td colspan="3">
    [% IF group.size %]
      <br>
        <strong>
          選択されたグループすべてに属するユーザのみがこのバグを閲覧することができます:
        </strong>
      <br>
      <font size="-1">
        (すべてのボックスのチェックを外すと誰でも見ることのできるバグになります)
      </font>
      <br>
      <br>

      <!-- Checkboxes -->
      [% FOREACH g = group %]
        &nbsp;&nbsp;&nbsp;&nbsp;
        <input type="checkbox" name="bit-[% g.bit %]" value="1"
          [% " checked=\"checked\"" IF g.checked %]>[% g.description %]<br>
      [% END %]
      <br>
    [% END %]
    </td>
  </tr>
  
  <tr>
    <td></td>
    <td colspan="3">
      <input type="submit" value="    Commit    " 
             onclick="if (this.form.short_desc.value == '') 
             { alert('このバグの要約を入力してください'); 
               return false; } return true;">
      &nbsp;&nbsp;&nbsp;&nbsp;
      <input type="submit" name="maketemplate" 
             value="入力された値を、ブックマーク可能なテンプレートとして記録">
    </td>
  </tr>

[% IF Param('usebrowserinfo') %]
  <tr>
    <td></td>
    <td colspan="3">
      <br>
      あなたの OS とプラットフォームを推測しました。正しいかどうか確かめて、もしまちがっていたら [% Param('maintainer') %] にメールしてください。
    </td>
  </tr>
[% END %]

  </table>
  <input type="hidden" name="form_name" value="enter_bug">
</form>

[% PROCESS global/footer.html.tmpl %]

[%############################################################################%]
[%# Block for SELECT fields                                                  #%]
[%############################################################################%]

[% BLOCK select %]
  [% IF sel.description %]
  <td align="right">
    <strong>
      <a href="bug_status.html#[% sel.name %]">[% sel.description %]</a>:
    </strong>
  </td>
  [% END %]
  
  <td>
    <select name="[% sel.name %]">
    [%- FOREACH x = ${sel.name} %]
      <option value="[% x FILTER html %]"
        [% " selected=\"selected\"" IF x == default.${sel.name} %]>[% x FILTER html -%]
      </option>
    [%- END %]
    </select>
  </td>
[% END %]
